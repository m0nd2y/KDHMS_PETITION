<!DOCTYPE html>
<html lang="en">
  <%- include("../header"); %>
  <body>
    <%- include("../menu"); %>

    <form id="createForm">
      <br><br>
      <!-- Material input -->
      <div class="input-group input-group-sm mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="inputGroup-sizing-sm">제목</span>
        </div>
        <input type="text" id="title" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" required>
      </div>
      
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="inputGroup-sizing-default">본문</span>
        </div>
        <input type="text" id="doby" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default"required >
      </div>
      
      <div class="input-group input-group-sm mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="inputGroup-sizing-sm">글쓴이</span>
        </div>
        <input type="text" id="name" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" required>
      </div>

      <button type="submit" class="btn btn-secondary">등록하기</button>
      
      <img
      src="https://9.socialconnections.info/wp-content/uploads/2012/07/Submit-Button-300x225.png"
      style="display: block; margin: 0 auto;"
    />
    </form>
    <%- include("../footer"); %>

    <script>
      $(function () {
        $("#createForm").submit((event) => {
          event.preventDefault();
          // 등록
          const title = $("#title").val();
          const doby = $("#doby").val();
          const name = $("#name").val();

          $.ajax({
            type: "POST",
            url: "/api/pettition",
            dataType: "json",
            data: { title, doby, name },
          })
            .done(() => {
              location.href = "/api/pettition";
            })
            .fail((req, sta, err) => {
              alert(req.responseText);
            });
        });
      });
    </script>
  </body>
</html>
